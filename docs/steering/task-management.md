# タスク管理ガイドライン

このドキュメントでは、プロジェクトのタスク管理における階層構造と用語定義を説明します。

## タスク階層の用語定義

プロジェクトのタスク管理では、以下の4階層を使用します：

### 1. Phase（フェーズ）
最上位の開発単位。

**番号形式**: 4, 5, 6...（単一の数字）

**例**:
- Phase 1: モノレポ基盤構築
- Phase 2: Server Core構築
- Phase 3: アプリケーション開発
- Phase 4: ビルド最適化
- Phase 5: CI/CD & ドキュメント

### 2. タスクグループ
**Vibe-KanbanタスクとPRの作成単位**。

**特徴**:
- **番号形式**: X.Y（例: 4.1, 4.2, 5.1）
- **チェックボックス**: 付ける（`- [ ]`）
- **粒度**: 1つの受け入れ条件を満たす／1つの機能が動作する状態（1-4時間）
- **成果物**: 1PR、デプロイ可能な単位、QAテスト対象
- **例**: 「Turborepoビルドパイプライン最適化」「リモートキャッシュ設定」

**tasks.md内の記述例**:
```markdown
- [ ] 4.1 Turborepoビルドパイプライン最適化

#### タスク

4.1.1 turbo.json設定とビルド検証

**サブタスク**:
- turbo.jsonパイプライン設定の確認と調整
- ビルド順序の検証
- キャッシュ戦略のテスト

**要件**: Story 8
**依存関係**: Phase 3完了
**完了条件**: turbo.jsonに全タスクが定義され、依存関係が正しく設定されていること（AC8.1を満たす）
**対応設計**: design.md「Turborepo設定」セクション
```

### 3. タスク
**作業単位・コミット単位**。

**特徴**:
- **番号形式**: X.Y.Z（例: 4.1.1, 4.1.2）
- **チェックボックス**: 付けない
- **粒度**: 具体的な作業項目（15分〜1時間程度）
- **成果物**: 個別コミット
- **例**: 「turbo.json設定とビルド検証」「並列ビルドとベンチマーク」

**tasks.md内の記述例**:
```markdown
4.1.1 turbo.json設定とビルド検証

**サブタスク**:
- turbo.jsonパイプライン設定の確認と調整
- ビルド順序の検証
- キャッシュ戦略のテスト

**要件**: Story 8
**依存関係**: Phase 3完了
**完了条件**: turbo.jsonに全タスクが定義され、依存関係が正しく設定されていること（AC8.1を満たす）
**対応設計**: design.md「Turborepo設定」セクション
```

### 4. サブタスク
**タスク内の詳細作業項目**。

**特徴**:
- **番号形式**: なし（箇条書き）
- **チェックボックス**: 付けない（`-`）
- **粒度**: 具体的な作業内容
- **成果物**: タスクの一部として実施
- **例**: 「turbo.jsonパイプライン設定の確認と調整」「ビルド順序の検証」

**tasks.md内の記述例**:
```markdown
**サブタスク**:
- turbo.jsonパイプライン設定の確認と調整
- ビルド順序の検証
- キャッシュ戦略のテスト
- 並列ビルドの検証
- ビルド時間の計測とベンチマーク
```

## タスク管理のワークフロー

### 1. タスクグループ単位でVibe-Kanbanタスクを作成
- **タスクグループ番号**: 4.1
- **タスクグループ名**: Turborepoビルドパイプライン最適化
- **タスク説明**: tasks.mdからタスク一覧、サブタスク、要件、依存関係、完了条件、対応設計を抽出

### 2. タスクを順次実装し、コミット
- 各タスク（4.1.1, 4.1.2...）完了ごとにコミット
- コミットメッセージにタスク内容を記載
- 例: `feat(build): turbo.json設定とビルド検証`

### 3. タスクグループ完了時にPR作成
- 全タスクが完了したらPR作成
- PR単位でレビュー・デプロイ・QA実施
- PRタイトル: `[タスクグループ番号] タスクグループ名`（例: `[4.1] Turborepoビルドパイプライン最適化`）

## タスクの粒度基準

### 適切な粒度
✅ **1つの受け入れ条件を満たす**
- 例: ビルドパイプラインの最適化（AC8.1-AC8.4を満たす）

✅ **1つの機能が動作する状態**
- 例: turbo.json設定からビルド時間計測まで（ビルド最適化が検証可能な状態）

✅ **1PR・1デプロイ・1QAテスト対象として適切（1-4時間）**
- PRレビューで全体を把握可能
- デプロイ後に機能として検証可能
- QAテストで受け入れ条件を検証可能

### 不適切な粒度
❌ **細かすぎる**
- 例: 設定ファイル1個の変更だけ、テスト1個の実行だけ
- 問題: PR・デプロイ・QA単位として意味がない

❌ **大きすぎる**
- 例: 複数の受け入れ条件をまたぐ、複数のStoryが混在
- 問題: レビューが困難、デプロイリスクが高い、QAテストが複雑化

## Vibe-Kanbanタスク作成時の必須情報

### タスクタイトル形式
```
[タスクグループ番号] タスクグループ名
```

**例**: `[4.1] Turborepoビルドパイプライン最適化`

### タスク説明形式

```markdown
## タスクファイル
`<タスクファイルパス>`

## タスクグループ番号
<タスクグループ番号>

## 概要
<タスクグループの概要>

## タスク
<tasks.mdから抽出したタスク一覧とサブタスク>

## 要件
<対応する要件番号>

## 依存関係
<依存するタスクグループ番号>

## 完了条件
<受け入れ基準を含む完了条件>

## 対応設計
<design.mdの参照箇所>
```

**例**:
```markdown
## タスクファイル
`docs/specs/tasks/monorepo/20251104-monorepo-turborepo-nextjs-setup/tasks/phase4-5.md`

## タスクグループ番号
4.1

## 概要
turbo.jsonの設定確認からビルド時間計測まで、ビルドパイプライン全体の最適化を完了

## タスク
4.1.1 turbo.json設定とビルド検証
- turbo.jsonパイプライン設定の確認と調整
- ビルド順序の検証
- キャッシュ戦略のテスト

4.1.2 並列ビルドとベンチマーク
- 並列ビルドの検証
- ビルド時間の計測とベンチマーク

## 要件
Story 8

## 依存関係
Phase 3完了

## 完了条件
ビルドパイプラインが最適化され、AC8.1-AC8.4を満たすこと

## 対応設計
design.md「ビルド最適化」セクション
```
