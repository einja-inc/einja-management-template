# create-einja-app シナリオテスト仕様

## 概要

このドキュメントでは、複数のタスクをまたぐ継続操作フローのテスト仕様を定義します。

## シナリオ一覧

| シナリオID | シナリオ名 | 実施タイミング |
|-----------|-----------|---------------|
| SCN-001 | 新規プロジェクト作成〜開発サーバー起動 | Phase 3完了後 |
| SCN-002 | 既存プロジェクトへのツール追加フロー | Phase 5完了後 |
| SCN-003 | テンプレート同期〜npm publish | Phase 7完了後 |
| SCN-004 | Worktree環境でのプロジェクト作成 | Phase 3完了後 |

---

## SCN-001: 新規プロジェクト作成〜開発サーバー起動

### 目的

`npx create-einja-app` でプロジェクトを作成し、開発サーバーが正常に起動するまでの一連のフローを検証する。

### 前提条件

- Node.js 20以上がインストールされている
- pnpmがインストールされている
- Dockerが起動している
- テスト用の空ディレクトリが用意されている

### テストステップ

| Step | 操作 | 期待結果 | AC対応 |
|------|------|---------|--------|
| 1 | `cd /tmp/test-workspace` | ディレクトリ移動 | - |
| 2 | `npx create-einja-app test-project` | 対話プロンプトが表示される | AC-001-4 |
| 3 | プロジェクト名: `test-project` を入力 | 次のプロンプトに進む | - |
| 4 | テンプレート: `turborepo-pandacss` を選択 | 次のプロンプトに進む | - |
| 5 | 認証方式: `Google OAuth` を選択 | 次のプロンプトに進む | AC-009-1 |
| 6 | 環境ツール: `direnv`, `dotenvx`, `Volta` を選択 | 次のプロンプトに進む | - |
| 7 | @einja/cli: `はい` を選択 | プロジェクト生成開始 | - |
| 8 | 生成完了を待機 | プロジェクトディレクトリが作成される | AC-001-1 |
| 9 | `cd test-project` | ディレクトリ移動 | - |
| 10 | ファイル構造確認 | 期待するファイルが存在する | AC-001-1 |
| 11 | `docker-compose up -d postgres` | PostgreSQLが起動する | - |
| 12 | `pnpm install` | 依存関係がインストールされる | AC-001-2 |
| 13 | `pnpm db:push` | データベーススキーマが適用される | - |
| 14 | `pnpm dev` | 開発サーバーが起動する | AC-001-3 |
| 15 | `curl http://localhost:3000` | HTMLレスポンスが返る | AC-001-3 |

※ 詳細なシナリオテスト内容は scenarios.md 本文を参照してください。
