# ドキュメントテンプレート

このディレクトリには、新規タスク作成時に使用する公式テンプレートが格納されています。

## 使用方法

### 新規タスクの要件定義書を作成する場合

1. `requirements.md.template` をコピー
2. `docs/specs/issues/[issue番号]-[機能名]/requirements.md` として保存
3. テンプレート内のコメントに従って内容を記入
4. **「受け入れ基準（Acceptance Criteria）」セクションは必ず記入すること**

### 新規タスクの設計書を作成する場合

1. `design.md.template` をコピー
2. `docs/specs/issues/[issue番号]-[機能名]/design.md` として保存
3. テンプレート内のコメントに従って内容を記入

## 重要事項

### 受け入れ基準（Acceptance Criteria）について

- **受け入れ基準（Acceptance Criteria）セクションは必須です**
- QAエージェント（task-qa）はこのセクションを参照してテストシナリオを作成します
- セクションの構造を変更しないでください
- Given/When/Then形式を使用してください

### Given/When/Then形式の書き方

受け入れ基準は以下の形式で記載してください：

```markdown
- [ ] Given: [前提条件]
      When: [実行する操作]
      Then: [期待される結果]
```

**良い例**:
```markdown
- [ ] Given: ログインページにアクセスした
      When: 有効なメールアドレスを入力して送信
      Then: 成功メッセージが表示され、メールが送信される
```

**悪い例**:
```markdown
- [ ] ログインフォームが実装されている
- [ ] メール送信機能が動作すること
```

### 受け入れ基準作成のガイドライン

詳細は `docs/steering/acceptance-criteria-and-qa-guide.md` を参照してください。

#### Do（推奨）
- 振る舞い・入力・観測可能な結果をセットで書く（Given/When/Then）
- ビジネス価値やユーザー影響が分かる文脈を添える
- 正常系に加え、代表的な異常・境界ケースを列挙する
- 観測手段（APIレスポンス、イベント、DB状態など）を明示する
- 実装と無関係な用語で書き、内部構造への言及は避ける

#### Don't（非推奨）
- 「ファイルが存在する」「〇〇を返すクラスがある」など構造・命名のみを確認させる
- 単一の肯定文で完結させて振る舞いの条件や観測結果を書かない
- テストレベルを曖昧にし、誰がどの観点で検証するか不明瞭にする
- 期待結果を「問題ないこと」「成功すること」で済ませる
- 実装手段（特定フレームワーク、DBテーブル構造など）を強制する

## テンプレート一覧

### requirements.md.template

要件定義書のテンプレートです。

**重要なセクション**:
- **受け入れ基準（Acceptance Criteria）**: QAエージェント（task-qa）がこのセクションを参照してテストシナリオを作成します
- **AC番号体系**: AC1.1, AC1.2 のように、ストーリー番号.連番 で一意に識別
- **検証レベル**: Unit/Integration/E2E を必ず指定
- **検証者**: task-executer または task-qa を明記

**使い方**:
1. ストーリーごとに受け入れ基準を記載
2. 各 AC に番号・検証レベル・検証者を付与
3. Given/When/Then 形式で振る舞いを明確に記述

**含まれるセクション**:
- 概要
- AS-IS/TO-BE
- ビジネス価値
- スコープ
- 画面要件（該当する場合）
- ユーザーストーリー
  - **受け入れ基準（必須）**
- 詳細なビジネス要件
- 非機能要件
- 技術的制約
- 依存関係
- リスクと対策
- 成功指標

### design.md.template

設計書のテンプレートです。以下のセクションを含みます：

- システムアーキテクチャ
- データモデル
- API仕様
- フロントエンドコンポーネント構造
- 技術選定
- セキュリティ考慮事項
- パフォーマンス考慮事項
- テスト戦略
- マイグレーション戦略（該当する場合）

### design-simple.md.template

設計書の簡易版テンプレートです。シンプルな機能向けに必須セクションのみを含みます。

**用途**:
- 小規模・中規模の機能追加
- 既存アーキテクチャに準拠する機能
- 複雑なパフォーマンス最適化が不要な機能

**含まれるセクション**:
- システムアーキテクチャ
- データモデル
- API仕様
- セキュリティ考慮事項
- テスト戦略

**使い分けの基準**:
- **design-simple.md.template を使用**: 既存パターンに従う標準的な CRUD 機能、シンプルなビジネスロジック
- **design.md.template を使用**: 新しいアーキテクチャパターンの導入、複雑な状態管理、大規模なパフォーマンス最適化が必要な機能

### qa-test.md.template

QA テスト結果記録のテンプレートです。

**用途**:
- task-qa が Integration/E2E テストの結果を記録
- テストシナリオと実施結果を構造化して管理

**構造**:
- 受け入れ条件（requirements.md から自動抽出）
- テストシナリオ（Integration/E2E 別）
- 実施結果とステータス
- 失敗時の原因分類と推奨アクション

**保存場所**: `docs/specs/tasks/[task-dir]/qa-tests/phaseN/X-Y.md`

## 関連ドキュメント

- [タスク管理ガイド](../docs/steering/task-management.md)
- [受け入れ基準とQAガイド](../docs/steering/acceptance-criteria-and-qa-guide.md)

## サポート

テンプレートの使用方法や記載内容について不明な点がある場合は、既存の実装例を参照してください。
